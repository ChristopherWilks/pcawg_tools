<tool id="broad_variant_pipline" name="BroadVariantPipeline" version="1.0.0">
    <description></description>
    <requirements>
        <!-- This docker image is closed source and must be obtained seperately -->
        <container type="docker">broad_variant_pipeline</container>
    </requirements>
    <command interpreter="bash">
broad_variant_pipeline.sh ${sample_id} ${tumor_bam} ${tumor_bam.metadata.bam_index} ${normal_bam} ${normal_bam.metadata.bam_index} ${broad_ref_dir} ./
    </command>

    <inputs>
        <param name="sample_id" type="text" label="Sample Name"/>
        <param name="tumor_bam" type="data" format="bam" label="Tumor BAM file"/>
        <param name="normal_bam" type="data" format="bam" label="Normal BAM file"/>
        <param name="broad_ref_dir" type="select" label="Broad Reference Directory">
            <options from_file="broad_ref_dir.loc">
                <column name="name" index="0"/>
                <column name="value" index="1"/>
            </options>
        </param>
    </inputs>

    <outputs>
        <collection name="gnos_vcfs" type="list" label="GNOS VCFs">
          <discover_datasets pattern="(?P&lt;name&gt;.*).vcf.gz?" format="vcf_bgzip" directory="gnos_vcfs"/>
        </collection>
        <data format="data" name="broad_output" label="${sample_id}.broad.tar.gz" from_work_dir="broad.tar.gz"/>
    </outputs>
    <stdio>
        <exit_code range="1:" level="fatal" />
    </stdio>
    <help>
If you want help, you've come to the wrong place
  </help>
</tool>
